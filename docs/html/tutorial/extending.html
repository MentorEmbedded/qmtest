<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 4. Extending QMTest</title><link rel="stylesheet" type="text/css" href="cs.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="QMTest: User's Guide"><link rel="up" href="index.html" title="QMTest: User's Guide"><link rel="prev" href="customizing-config-file.html" title="10. The QMTest Configuration File"><link rel="next" href="extending-field-classes.html" title="2. Field Classes"><link rel="copyright" href="ln-id335742.html" title="Legal Notice"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 4. Extending QMTest</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="customizing-config-file.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="extending-field-classes.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 4. Extending QMTest"><div class="titlepage"><div><div><h2 class="title"><a name="extending"></a>Chapter 4. Extending QMTest</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="extending.html#extension-classes">1. Extension Classes</a></span></dt><dt><span class="section"><a href="extending-field-classes.html">2. Field Classes</a></span></dt><dt><span class="section"><a href="extending-test-classes.html">3. Writing Test Classes</a></span></dt><dt><span class="section"><a href="extending-resource-classes.html">4. Writing Resource Classes</a></span></dt><dt><span class="section"><a href="extending-database-classes.html">5. Writing Database Classes</a></span></dt><dt><span class="section"><a href="extending-registering.html">6. Registering and Distributing Extension Classes</a></span></dt></dl></div><p>If the built-in functionality provided with QMTest does not
 serve all of your needs, you can extend QMTest.  All extensions to
 QMTest take the form of Python classes.  You can write new test
 classes, resource classes, or database classes in this way.</p><p>The contents of the class differ depending on the kind of
 extension you are creating.  For example, the methods that a new test
 class must implement are different from those that must be provided
 by a new database class.  In each case, however, you must create the
 class and place it in a location where QMTest can find it.  The
 following sections explain how to create extension classes.  The last
 section in this chapter explains how to register your new extension
 classes.</p><div class="section" title="1. Extension Classes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="extension-classes"></a>1. Extension Classes</h2></div></div></div><p>All extensions to QMTest are implemented by writing a new
  Python class.  This new Python class will be derived from an
  appropriate existing QMTest Python class.  For example, new test
  classes are derived from <code class="classname">Test</code> while new test
  database classes are derived from
  <code class="classname">Database</code>.</p><p>The classes from which new extensions are derived (like
  <code class="classname">Test</code>) are all themselves derived from
  <a class="ulink" href="http://www.codesourcery.com/public/qmtest/qmtest-2.4.1/internals/qm/extension/Extension.html" target="_top"><code class="classname">Extension</code></a>.  The <code class="classname">Extension</code> class
  provides the basic framework used by all extension classes.  In
  particular, every instance of <code class="classname">Extension</code> can
  be represented in XML format in persistent storage.</p><p>Every <code class="classname">Extension</code> class has an associated
  list of <em class="firstterm">parameter</em> attributes.  When an 
  <code class="classname">Extension</code> instance is written out as XML, the 
  value of each parameter is encoded in the output.  Similarly,
  when an <code class="classname">Extension</code> instance is read back in,
  the parameter values are decoded.  Conceptually, two 
  <code class="classname">Extension</code> instances are the same if they are 
  instances of the same derived class and their parameters have the same
  values.</p><p>Each parameter has a type.  For example, every
  <code class="classname">Test</code> has a parameter called
  <code class="varname">target_group</code>.  The target group is a string
  indicating on which targets a particular test should be
  run.</p><p>Each parameter is represented by an instance of <a class="ulink" href="http://www.codesourcery.com/public/qmtest/qmtest-2.4.1/internals/qm/fields/Field.html" target="_top"><code class="classname">Field</code></a>.
  A <code class="classname">Field</code> instance can read or write values in
  XML format.  A <code class="classname">Field</code> can also produce an HTML
  representation of a value, or an HTML form that allows a user to
  update the value of the field.  It is the fact that all
  <code class="classname">Extension</code> parameters are instances of
  <code class="classname">Field</code> that makes it possible to represent
  <code class="classname">Extension</code> instances as XML.  Smilarly, it is
  the use of the <code class="classname">Field</code> class that allows
  the user to edit tests in the QMTest GUI.</p><p>Each class derived from <code class="classname">Extension</code> may
  contain attributes that are instances of <code class="classname">Field</code>.
  </p><p>For example, after the following class definitions:
  </p><pre class="programlisting">
    class A(Extension):
        x = TextField()

    class B(A):
        y = IntegerField(default_value = 42)
        z = TextField(default_value = "a value")
  </pre><p><code class="classname">A</code> has one parameter
  (<code class="varname">x</code>) and <code class="classname">B</code> has three
  parameters (<code class="varname">x</code>, <code class="varname">y</code>, and
  <code class="varname">z</code>).</p><p>During construction of extensions you may provide arguments
  to set the values of these parameters (and thus overriding default values):</p><pre class="programlisting">
    a = A(x = "argument")
    b = B(x = "another argument", z = "value")
  </pre><p>The serialized form of A will be equivalent to</p><pre class="programlisting">
&lt;extension class="__main__.A"&gt;
  &lt;argument name="x"&gt;&lt;text&gt;argument&lt;/text&gt;&lt;/argument&gt;
&lt;/extension&gt;
  </pre><p>and for B</p><pre class="programlisting">
&lt;extension class="__main__.B"&gt;
  &lt;argument name="x"&gt;&lt;text&gt;another argument&lt;/text&gt;&lt;/argument&gt;
  &lt;argument name="y"&gt;&lt;integer&gt;42&lt;/integer&gt;&lt;/argument&gt;
  &lt;argument name="z"&gt;&lt;text&gt;value&lt;/text&gt;&lt;/argument&gt;
&lt;/extension&gt;
  </pre><p>Extension instances hold appropriately typed attributes for all
  fields. A <code class="classname">TextField</code> translates to a 
  <code class="classname">str</code> instance, while a <code class="classname">IntegerField</code>
  translates to an <code class="classname">int</code>, etc.</p><pre class="screen">
<code class="prompt">&gt; </code>a = A(x = "argument")
<code class="prompt">&gt; </code>print type(a.x), a.x
&lt;type 'str'&gt; argument
  </pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="customizing-config-file.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="extending-field-classes.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">10. The <span class="application">QMTest</span> Configuration File </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 2. Field Classes</td></tr></table></div></body></html>
