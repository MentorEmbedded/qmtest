<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>2. Tests</title><link rel="stylesheet" type="text/css" href="cs.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="QMTest: User's Guide"><link rel="up" href="customizing.html" title="Chapter 3. Customizing QMTest"><link rel="prev" href="customizing.html" title="Chapter 3. Customizing QMTest"><link rel="next" href="customizing-suites.html" title="3. Test Suites"><link rel="copyright" href="ln-id335742.html" title="Legal Notice"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2. Tests</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="customizing.html">Prev</a> </td><th width="60%" align="center">Chapter 3. Customizing <span class="application">QMTest</span></th><td width="20%" align="right"> <a accesskey="n" href="customizing-suites.html">Next</a></td></tr></table><hr></div><div class="section" title="2. Tests"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="customizing-tests"></a>2. Tests</h2></div></div></div><div class="section" title="2.1. command.ExecTest"><div class="titlepage"><div><div><h3 class="title"><a name="customizing-command-exectest"></a>2.1. <code class="classname">command.ExecTest</code></h3></div></div></div><p>The <code class="classname">command.ExecTest</code> test class runs a
    program from an ordinary executable file.  Each test specifies the
    program executable to run, its full command line, and the data to
    feed to its standard input stream.  <code class="classname">ExecTest</code>
    collects the complete text of the program's standard output and
    standard error streams and the program's exit code, and compares
    these to expected values specified in the test.  If the standard
    output and error text and the exit code match the expected values,
    the test passes.</p><p>A <code class="classname">command.ExecTest</code> test supplies the
    following arguments:</p><div class="glosslist"><dl><dt><span class="property">Program</span> (text field)</dt><dd><p>The name of the executable file to run.
       <code class="classname">command.ExecTest</code> attempts to locate the
       program executable in the path specified by the
       <span class="property">path</span> property of the test context.</p></dd><dt><span class="property">Argument List</span> (set of strings)</dt><dd><p>The argument list for the program.  The elements of this
       set are sequential items from which the program's argument list
       is constructed.  <code class="classname">command.ExecTest</code>
       automatically prepends an implicit zeroth element, the full path
       of the program.</p></dd><dt><span class="property">Standard Input</span> (text
      field)</dt><dd><p>Text or data to pass to the program's standard input
       stream.  This data is written to a temporary file, and the
       contents of the file are directed to the program's standard
       input stream.</p></dd><dt><span class="property">Environment</span> (set of strings)</dt><dd><p>The environment (i.e. the set of environment variables)
       available to the executing program.  Each element of this
       argument is a string of the form
       "<em class="replaceable"><code>VARIABLE</code></em>=<em class="replaceable"><code>VALUE</code></em>".</p><p><code class="classname">command.ExecTest</code> adds additional
       environment variables automatically.</p><p>In addition, every context property whose value is a string
       is accessible as an environment variable; the name of the
       environment variable is the name of the context property,
       prefixed with "<code class="envar">QMV_</code>" and with any dots
       (".") replaced by a double underscore
       ("__").  For example, the value of the context property
       "CompilerTable.c_path" is available as the value of the
       environment variable
       "<code class="envar">QMV_CompilerTable__c_path</code>".</p></dd><dt><span class="property">Expected Exit Code</span> (integer
      field)</dt><dd><p>The exit code value expected from the program.  If the
       program produces an exit code value different from this one, the
       test fails.</p></dd><dt><span class="property">Expected Standard Output</span>
      (text field)</dt><dd><p>The text or data which the program is expected to produce
       on its standard output stream.  The actual text or data written
       to standard output is captured, and
       <code class="classname">command.ExecTest</code> performs a bytewise
       comparison to the expected text or data.  If they do not match,
       the test fails.</p></dd><dt><span class="property">Expected Standard Error</span>
      (text field)</dt><dd><p>The text or data which the program is expected to produce
       on its standard error stream.  The actual text or data written to
       standard error is captured, and
       <code class="classname">command.ExecTest</code> performs a bytewise
       comparison to the expected text or data.  If they do not match,
       the test fails.</p></dd></dl></div></div><div class="section" title="2.2. command.ShellCommandTest"><div class="titlepage"><div><div><h3 class="title"><a name="customizing-command-commandtest"></a>2.2. <code class="classname">command.ShellCommandTest</code></h3></div></div></div><p><code class="classname">command.ShellCommandTest</code> is very
    similar to <code class="classname">command.ExecTest</code>, except that it
    runs a program via the shell rather than directly.  Instead of
    specifying an executable to run and the elements of its argument
    list, a test provides a single command line.  The shell is
    responsible for finding the executable and constructing its
    argument list.</p><p>Standard input and the environment are specified in the test.
    The test passes if the command produces the expected standard
    output, standard error, and exit code.</p><p>Note that most shells create local shell variables to mirror
    the contents of the environment when the shell starts up.
    Therefore, the environment set up by a
    <code class="classname">command.ShellCommandTest</code>, including the contents
    of the test context, are directly accessible via shell variables.
    The syntax to use depends on the particular shell.</p><p><code class="classname">command.ShellCommandTest</code> has the same fields
    as <code class="classname">command.ExecTest</code>, except that the
    <span class="property">Program</span> and <span class="property">Argument List</span>
    properties are replaced with these:</p><div class="glosslist"><dl><dt><span class="property">Command</span> (text field)</dt><dd><p>The command to run.  The command is delivered verbatim to
       the shell.  The shell interprets the command according to its own
       quoting rules and syntax.</p></dd></dl></div></div><div class="section" title="2.3. command.ShellScriptTest"><div class="titlepage"><div><div><h3 class="title"><a name="customizing-command-scripttest"></a>2.3. <code class="classname">command.ShellScriptTest</code></h3></div></div></div><p><code class="classname">command.ShellScriptTest</code> is an extension of
    <code class="classname">command.CommandTest</code> that lets a test specify
    an entire shell script instead of a single command.  The script
    specified in the test is written to a temporary file, and this file
    is interpreted by the specified shell or command interpreter
    program.</p><p>Standard input, the environment, and the argument list to pass
    to the script are specified in the test.  The test passes if the
    script produces the expected standard output, standard error, and
    exit code.</p><p>Note that most shells create local shell variables to mirror
    the contents of the environment when the shell starts up.
    Therefore, the environment set up by a
    <code class="classname">command.ShellScriptTest</code>, including the contents of
    the test context, are directly accessible via shell variables.  The
    syntax to use depends on the particular shell.</p><p><code class="classname">command.ShellScriptTest</code> has the same fields
    as <code class="classname">command.ExecTest</code>, except that the
    <span class="property">Program</span> property is replaced with:</p><div class="glosslist"><dl><dt><span class="property">Script</span> (text field)</dt><dd><p>The text of the script to run.</p></dd></dl></div></div><div class="section" title="2.4. CompilationTest"><div class="titlepage"><div><div><h3 class="title"><a name="customizing-compilation-test"></a>2.4. <code class="classname">CompilationTest</code></h3></div></div></div><p><code class="classname">compilation_test.CompilationTest</code> compiles
    a set of source files and optionally runs the compiled executable.
    </p><p>The compiler executable's name, as well as global compilation
    parameters are queried from these <a class="link" href="concepts-context.html" title="6. Context">context</a> 
    variables:</p><div class="variablelist"><dl><dt><span class="term">CompilationTest.compiler_path</span></dt><dd><p>The name of the compiler executable.</p></dd><dt><span class="term">CompilationTest.compiler_options</span></dt><dd><p>Compiler options.</p></dd><dt><span class="term">CompilationTest.compiler_ldflags</span></dt><dd><p>Linker options.</p></dd></dl></div><p>The <code class="classname">CompilationTest</code> takes the following parameters.</p><div class="glosslist"><dl><dt><span class="property">options</span> (set field)</dt><dd><p>Test-specific options to pass to the compiler.</p></dd><dt><span class="property">ldflags</span> (set field)</dt><dd><p>Test-specific linker flags to pass to the compiler.</p></dd><dt><span class="property">source_files</span> (set field)</dt><dd><p>Source files to be compiled..</p></dd><dt><span class="property">executable</span> (text field)</dt><dd><p>The name of the executable to be compiled.</p></dd><dt><span class="property">execute</span> (boolean field)</dt><dd><p>Whether or not to run the compiled executable.</p></dd></dl></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="customizing.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="customizing.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="customizing-suites.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 3. Customizing <span class="application">QMTest</span> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 3. Test Suites</td></tr></table></div></body></html>
