<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>6. Expectation Databases</title><link rel="stylesheet" type="text/css" href="cs.css"><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"><link rel="home" href="index.html" title="QMTest: User's Guide"><link rel="up" href="customizing.html" title="Chapter 3. Customizing QMTest"><link rel="prev" href="customizing-test-databases.html" title="5. Test Databases"><link rel="next" href="customizing-test-targets.html" title="7. Test Targets"><link rel="copyright" href="ln-id335742.html" title="Legal Notice"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">6. Expectation Databases</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="customizing-test-databases.html">Prev</a> </td><th width="60%" align="center">Chapter 3. Customizing <span class="application">QMTest</span></th><td width="20%" align="right"> <a accesskey="n" href="customizing-test-targets.html">Next</a></td></tr></table><hr></div><div class="section" title="6. Expectation Databases"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="customizing-expectation-databases"></a>6. Expectation Databases</h2></div></div></div><div class="section" title="6.1. PreviousTestRun"><div class="titlepage"><div><div><h3 class="title"><a name="previous-test-run"></a>6.1. PreviousTestRun</h3></div></div></div><p>The PreviousTestRun queries expectations from a results file. Thus, running
     <span class="application">QMTest</span> twice, the second time using the results of the
     first test run as expectations, will result in no unexpected results:</p><pre class="screen">
<code class="prompt">&gt; </code><strong class="userinput"><code>qmtest run -o my_results.qmr</code></strong>
--- TEST RESULTS -------------------------------------------------------------

  exec0                                         : PASS

  exec1                                         : FAIL
    ...
  exec2                                         : PASS

--- TESTS THAT DID NOT PASS --------------------------------------------------

  exec1                                         : FAIL
    Expression evaluates to false.


--- STATISTICS ---------------------------------------------------------------

       3        tests total
       1 ( 33%) tests FAIL
       2 ( 67%) tests PASS

<code class="prompt">&gt; </code><strong class="userinput"><code>qmtest run -e previous_testrun.PreviousTestRun(file_name="my_results.qmr")</code></strong>
--- TEST RESULTS -------------------------------------------------------------

  exec0                                         : PASS

  exec1                                         : XFAIL
    ...
  exec2                                         : PASS

--- TESTS WITH UNEXPECTED OUTCOMES -------------------------------------------

  None.


--- STATISTICS ---------------------------------------------------------------

       3 (100%) tests as expected

     </pre><p>Since taking previous test runs as expectations is a common use case, the 
     second command above may be expressed in a more compact form as:</p><pre class="screen"><strong class="userinput"><code>qmtest run -O my_results.qmr</code></strong></pre><p>The <code class="classname">PreviousTestRun</code> takes the following parameters.</p><div class="glosslist"><dl><dt><span class="property">file_name</span> (text field)</dt><dd><p>The filename of the results file.</p></dd></dl></div></div><div class="section" title="6.2. XMLExpectationDatabase"><div class="titlepage"><div><div><h3 class="title"><a name="xml-expectation-database"></a>6.2. XMLExpectationDatabase</h3></div></div></div><p>The <span class="type">XMLExpectationDatabase</span> stores expectations in an XML file.
     Instead of containing expectations for all tests, individual expectations are 
     computed from rules by matching test-ids as well as test-run annotations against
     specific rules.</p><pre class="screen">
&lt;expectations&gt;
  &lt;expectation outcome="fail" test_id=".*"&gt;
    &lt;annotation name="a" value="b"/&gt;
  &lt;/expectation&gt;
  &lt;expectation outcome="fail" test_id="first*" /&gt;
&lt;/expectations&gt;
     </pre><p>The above little expectation database thus contains the following rules (subsequent matching 
     rules override previous matching rules):</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>All tests are expected to fail if the annotation <code class="varname">a</code> has value 
       <em class="parameter"><code>b</code></em>.</p></li><li class="listitem"><p>All tests whose test-ids start with <em class="parameter"><code>first</code></em> are expected to fail.</p></li></ol></div><p>The <code class="classname">XMLExpectationDatabase</code> takes the following parameters.</p><div class="glosslist"><dl><dt><span class="property">file_name</span> (text field)</dt><dd><p>The filename of the xml expectations file.</p></dd></dl></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="customizing-test-databases.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="customizing.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="customizing-test-targets.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">5. Test Databases </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 7. Test Targets</td></tr></table></div></body></html>
